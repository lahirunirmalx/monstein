# Monstein API Routes Configuration
# 
# Rate Limiting Options (optional):
#   rate_limit:
#     enabled: true/false (default: true)
#     max_requests: number (default: 100 for secure, 30 for public)
#     window_seconds: number (default: 60)
#
# Parameter Validation (optional):
#   params:
#     {param_name}: validation_type
#   Supported types: id, integer, uuid, slug, alpha, alphanumeric
#
# File Upload Options (optional):
#   file_upload:
#     enabled: true/false
#     max_size: number (bytes, default: 10485760 = 10MB)
#     allowed_types: 'images' | 'documents' | 'all' | [array of mime types]
#     storage: 'filesystem' | 'database' | 'both'
#     db_format: 'base64' | 'blob' (for database storage)
#     strict: true/false (return error if any file fails, default: false)
#
# Usage Tracking Options (optional):
#   tracking: true/false         # Simple enable/disable
#   OR
#   tracking:
#     enabled: true/false        # Enable tracking for this endpoint
#     name: "custom_name"        # Custom name for reports/analytics
#     track_user: true/false     # Track user ID (default: true)
#     track_ip: true/false       # Track IP address (default: true)
#     track_user_agent: false    # Track user agent (default: false)
#     track_body: false          # Track request body (default: false, security risk!)
#
# ============================================================================

issueToken:
  url: /issueToken
  controller: \Monstein\Controllers\IssueTokenController
  method: [ post ]
  is_secure: false
  rate_limit:
    enabled: true
    max_requests: 10      # Strict limit for login (brute-force protection)
    window_seconds: 60
  tracking:
    enabled: true
    name: "auth_login"    # Custom name for analytics
    track_user: false     # No user yet (login endpoint)
    track_ip: true        # Track IP for security

todos:
  url: /todo
  controller: \Monstein\Controllers\TodoCollectionController
  method: [ post , get ]
  tracking: true          # Simple enable (uses defaults)

todo:
  url: /todo/{id}
  controller: \Monstein\Controllers\TodoEntityController
  method: [ put , get , delete ]
  params:
    id: id                # Validates as positive integer

categories:
  url: /categories
  controller: \Monstein\Controllers\CategoryCollectionController
  method: [ post , get ]

category:
  url: /category/{id}
  controller: \Monstein\Controllers\CategoryEntityController
  method: [ put , get , delete ]
  params:
    id: id

category_todos:
  url: /category/{id}/todos
  controller: \Monstein\Controllers\CategoryEntityController
  service: todos
  method: [ get ]
  params:
    id: id

# ============================================================================
# File Upload Endpoints
# ============================================================================

files:
  url: /files
  controller: \Monstein\Controllers\FileCollectionController
  method: [ post, get ]
  file_upload:
    enabled: true
    max_size: 10485760            # 10MB
    allowed_types: all            # 'images', 'documents', or 'all'
    storage: filesystem           # 'filesystem', 'database', or 'both'
    db_format: base64             # 'base64' or 'blob'

file:
  url: /files/{id}
  controller: \Monstein\Controllers\FileEntityController
  method: [ get, delete ]
  params:
    id: id

# Example: Images only endpoint with database storage
files_images:
  url: /images
  controller: \Monstein\Controllers\FileCollectionController
  method: [ post, get ]
  file_upload:
    enabled: true
    max_size: 5242880             # 5MB for images
    allowed_types: images
    storage: database             # Store in database
    db_format: base64

# ============================================================================
# Usage Statistics Endpoints
# ============================================================================

usage_stats:
  url: /usage/stats
  controller: \Monstein\Controllers\UsageStatsController
  method: [ get ]
  tracking: false                 # Don't track the tracking endpoint itself

usage_top:
  url: /usage/top
  controller: \Monstein\Controllers\UsageStatsController
  service: topEndpoints
  method: [ get ]
  tracking: false

usage_slow:
  url: /usage/slow
  controller: \Monstein\Controllers\UsageStatsController
  service: slowEndpoints
  method: [ get ]
  tracking: false

usage_errors:
  url: /usage/errors
  controller: \Monstein\Controllers\UsageStatsController
  service: errorRates
  method: [ get ]
  tracking: false