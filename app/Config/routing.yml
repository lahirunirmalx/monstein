# Monstein API Routes Configuration
# 
# Rate Limiting Options (optional):
#   rate_limit:
#     enabled: true/false (default: true)
#     max_requests: number (default: 100 for secure, 30 for public)
#     window_seconds: number (default: 60)
#
# Parameter Validation (optional):
#   params:
#     {param_name}: validation_type
#   Supported types: id, integer, uuid, slug, alpha, alphanumeric
#
# File Upload Options (optional):
#   file_upload:
#     enabled: true/false
#     max_size: number (bytes, default: 10485760 = 10MB)
#     allowed_types: 'images' | 'documents' | 'all' | [array of mime types]
#     storage: 'filesystem' | 'database' | 'both'
#     db_format: 'base64' | 'blob' (for database storage)
#     strict: true/false (return error if any file fails, default: false)
#
# ============================================================================

issueToken:
  url: /issueToken
  controller: \Monstein\Controllers\IssueTokenController
  method: [ post ]
  is_secure: false
  rate_limit:
    enabled: true
    max_requests: 10      # Strict limit for login (brute-force protection)
    window_seconds: 60

todos:
  url: /todo
  controller: \Monstein\Controllers\TodoCollectionController
  method: [ post , get ]

todo:
  url: /todo/{id}
  controller: \Monstein\Controllers\TodoEntityController
  method: [ put , get , delete ]
  params:
    id: id                # Validates as positive integer

categories:
  url: /categories
  controller: \Monstein\Controllers\CategoryCollectionController
  method: [ post , get ]

category:
  url: /category/{id}
  controller: \Monstein\Controllers\CategoryEntityController
  method: [ put , get , delete ]
  params:
    id: id

category_todos:
  url: /category/{id}/todos
  controller: \Monstein\Controllers\CategoryEntityController
  service: todos
  method: [ get ]
  params:
    id: id

# ============================================================================
# File Upload Endpoints
# ============================================================================

files:
  url: /files
  controller: \Monstein\Controllers\FileCollectionController
  method: [ post, get ]
  file_upload:
    enabled: true
    max_size: 10485760            # 10MB
    allowed_types: all            # 'images', 'documents', or 'all'
    storage: filesystem           # 'filesystem', 'database', or 'both'
    db_format: base64             # 'base64' or 'blob'

file:
  url: /files/{id}
  controller: \Monstein\Controllers\FileEntityController
  method: [ get, delete ]
  params:
    id: id

# Example: Images only endpoint with database storage
files_images:
  url: /images
  controller: \Monstein\Controllers\FileCollectionController
  method: [ post, get ]
  file_upload:
    enabled: true
    max_size: 5242880             # 5MB for images
    allowed_types: images
    storage: database             # Store in database
    db_format: base64